{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/nidanurgunay/Desktop/cs308/e-commerce-frontend/src/sm_campaigns.js\";\nimport './App.css';\nimport tracker from '../src/api/tracker';\nimport Table from 'react-bootstrap/Table';\nimport 'react-pro-sidebar/dist/css/styles.css';\nimport { FaCheckCircle } from \"react-icons/fa\";\nimport { IconContext } from \"react-icons\";\nimport React, { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Input } from '@material-ui/core';\n\nclass sm_campaigns extends Component {\n  constructor() {\n    super();\n\n    this.componentDidMount = async () => {\n      try {\n        debugger;\n        const response = await tracker.get(\"product/all\");\n        const arrayproduct = response.data;\n        this.setState({\n          products: arrayproduct\n        });\n        console.log(\"state\", this.state.products);\n        var prod = [];\n        var arr = [];\n\n        if (this.state.products.length !== 0) {\n          console.log(this.state.products);\n          var item;\n          var parray = [];\n          var pricelist = [];\n\n          for (var i = 0; i < this.state.products.length; i++) {\n            const newprice = this.state.products[i].newprice;\n            pricelist.push(newprice);\n          }\n\n          await this.setState({\n            updated_prices: pricelist\n          });\n\n          for (var i = 0; i < this.state.products.length; i++) {\n            console.log(this.state.products[i]);\n            const id = this.state.products[i]._id;\n            const brand = this.state.products[i].brand;\n            const category = this.state.products[i].category;\n            const countInStock = this.state.products[i].countInStock;\n            const size = this.state.products[i].size;\n            const gender = this.state.products[i].gender;\n            const newprice = this.state.products[i].newprice;\n            const price = this.state.products[i].price;\n            const name = this.state.products[i].name;\n            const description = this.state.products[i].description;\n            const rate = this.state.products[i].rate;\n            const img = this.state.products[i].image;\n            var context = this;\n            const index = i;\n\n            var update = /*#__PURE__*/_jsxDEV(Input, {\n              type: \"tel\",\n              style: {\n                color: \"white\"\n              },\n              onChange: context.handleItemChanged.bind(context, index),\n              placeholder: newprice\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 35\n            }, this);\n\n            const save = /*#__PURE__*/_jsxDEV(IconContext.Provider, {\n              value: {\n                color: 'rgba(195, 159, 220, 0.90)',\n                size: '20px',\n                lightingColor: \"white\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(FaCheckCircle, {\n                style: {\n                  cursor: \"pointer\"\n                },\n                onClick: () => {\n                  this.handleUpdate(id, name, size, category, brand, description, gender, newprice, index, rate, price, countInStock, img);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 22\n              }, this), \"   \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 35\n            }, this);\n\n            const prod = [name, id, brand, category, gender, countInStock, size, price, newprice, update, save];\n            console.log(id);\n            console.log(prod);\n            parray.push(prod);\n          }\n\n          ;\n\n          var item = /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: \"20px\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Table, {\n              striped: true,\n              responsive: true,\n              bordered: true,\n              hover: true,\n              variant: \"dark\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 88,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"Id\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"Brand\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"Category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"Gender\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 92,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"Count in Stock\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 93,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"Size\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"New Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"Update Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"Save\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: parray.map((numList, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: numList.map((num, j) => /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: num\n                  }, j, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 107,\n                    columnNumber: 57\n                  }, this))\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 45\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 21\n          }, this);\n\n          arr.push(item);\n          await this.setState({\n            arr: arr\n          });\n          await this.setState({\n            change: true\n          });\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    this.reloadPage = () => {\n      // The last \"domLoading\" Time //\n      var currentDocumentTimestamp = new Date(performance.timing.domLoading).getTime(); // Current Time //\n\n      var now = Date.now(); // Ten Seconds //\n\n      var tenSec = 10 * 1000; // Plus Ten Seconds //\n\n      var plusTenSec = currentDocumentTimestamp + tenSec;\n\n      if (now > plusTenSec) {\n        window.location.reload();\n      } else {}\n    };\n\n    this.handleUpdate = async (id, name, size, category, brand, description, gender, newprice, index, rate, price, countInStock, img) => {\n      debugger;\n\n      try {\n        console.log(\"handleUpdate\");\n        console.log(\"updated:\", this.state.updated_prices[index]);\n\n        if (this.state.updated_prices[index] !== newprice) {\n          const np = this.state.updated_prices[index];\n          const response = await tracker.put(\"product/sm/\" + id, {\n            newprice: np\n          });\n          console.log(response);\n        }\n\n        this.reloadPage();\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    this.state = {\n      products: [],\n      updated_prices: [],\n      price: 0,\n      arr: [],\n      change: false\n    };\n  }\n\n  handleItemChanged(i, event) {\n    debugger;\n    var updated_prices = this.state.updated_prices;\n    updated_prices[i] = event.target.value;\n    this.setState({\n      updated_prices: updated_prices\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [this.reloadPage(), this.state.change ? this.state.arr : null]\n    }, void 0, true);\n  }\n\n}\n\nexport default sm_campaigns;","map":{"version":3,"sources":["/Users/nidanurgunay/Desktop/cs308/e-commerce-frontend/src/sm_campaigns.js"],"names":["tracker","Table","FaCheckCircle","IconContext","React","Component","Input","sm_campaigns","constructor","componentDidMount","response","get","arrayproduct","data","setState","products","console","log","state","prod","arr","length","item","parray","pricelist","i","newprice","push","updated_prices","id","_id","brand","category","countInStock","size","gender","price","name","description","rate","img","image","context","index","update","color","handleItemChanged","bind","save","lightingColor","cursor","handleUpdate","marginTop","map","numList","num","j","change","e","reloadPage","currentDocumentTimestamp","Date","performance","timing","domLoading","getTime","now","tenSec","plusTenSec","window","location","reload","np","put","event","target","value","render"],"mappings":"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","sourcesContent":["import './App.css';\nimport tracker from '../src/api/tracker';\nimport Table from 'react-bootstrap/Table';\nimport 'react-pro-sidebar/dist/css/styles.css';\nimport { FaCheckCircle } from \"react-icons/fa\";\nimport { IconContext } from \"react-icons\";\nimport React, { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Input } from '@material-ui/core';\n\nclass sm_campaigns extends Component {\n    constructor() {\n        super()\n        this.state = {\n            products: [],\n            updated_prices: [],\n            price: 0,\n            arr: [],\n            change:false\n        }\n    }\n    handleItemChanged(i, event) {\n        debugger;\n        var updated_prices = this.state.updated_prices;\n        updated_prices[i] = event.target.value;\n\n        this.setState({\n            updated_prices: updated_prices\n        });\n    }\n    componentDidMount = async () => {\n        try {\n            debugger;\n            const response = await tracker.get(\"product/all\");\n            const arrayproduct = response.data;\n            this.setState({ products: arrayproduct });\n            console.log(\"state\", this.state.products);\n\n            var prod = [];\n            var arr = [];\n            if (this.state.products.length !== 0) {\n                console.log(this.state.products);\n                var item;\n                var parray = [];\n                var pricelist = [];\n                for (var i = 0; i < this.state.products.length; i++) {\n                    const newprice = this.state.products[i].newprice;\n                    pricelist.push(newprice);\n                }\n                await this.setState({ updated_prices: pricelist });\n\n                for (var i = 0; i < this.state.products.length; i++) {\n                    console.log(this.state.products[i]);\n                    const id = this.state.products[i]._id;\n                    const brand = this.state.products[i].brand;\n                    const category = this.state.products[i].category;\n                    const countInStock = this.state.products[i].countInStock;\n                    const size = this.state.products[i].size;\n                    const gender = this.state.products[i].gender;\n                    const newprice = this.state.products[i].newprice;\n                    const price = this.state.products[i].price;\n                    const name = this.state.products[i].name;\n                    const description = this.state.products[i].description;\n                    const rate = this.state.products[i].rate;\n                    const img = this.state.products[i].image;\n                    var context = this; \n                    const index = i;\n\n\n\n                    var update = (< Input type=\"tel\" style={{ color: \"white\" }} onChange={context.handleItemChanged.bind(context, index)} placeholder={newprice} />)\n                    const save = (<IconContext.Provider\n                        value={{ color: 'rgba(195, 159, 220, 0.90)', size: '20px', lightingColor: \"white\" }}\n                    ><FaCheckCircle style={{ cursor: \"pointer\" }} onClick={() => { this.handleUpdate(id, name, size, category, brand, description, gender, newprice, index, rate, price, countInStock, img) }} />   </IconContext.Provider>)\n                    const prod = [name, id, brand, category,gender, countInStock, size, price, newprice, update, save]\n                    console.log(id);\n                    console.log(prod);\n                    parray.push(prod);\n                };\n\n                var item = (\n                    <div style={{ marginTop: \"20px\" }}>\n\n                       \n                            <Table striped responsive bordered hover variant=\"dark\">\n\n                                <thead>\n                                    <td>Name</td>\n                                    <td>Id</td>\n                                    <td>Brand</td>\n                                    <td>Category</td>\n                                    <td>Gender</td>\n                                    <td>Count in Stock</td>\n                                    <td>Size</td>\n                                    <td>Price</td>\n                                    <td>New Price</td>\n                                    <td>Update Price</td>\n                                    <td>Save</td>\n                                </thead>\n                                <tbody>\n\n                                    {\n                                        parray.map((numList, i) => (\n                                            <tr key={i}>\n                                                {\n                                                    numList.map((num, j) =>\n                                                        <td key={j}>{num}</td>\n\n                                                    )\n                                                }\n                                            </tr>\n                                        ))\n                                    }\n\n                                </tbody>\n\n                            </Table>\n               \n                    </div>\n\n                );\n\n                arr.push(item);\n                await this.setState({ arr: arr });\n                await this.setState({ change: true })\n\n\n            }\n\n\n        } catch (e) {\n            console.log(e);\n        }\n\n    }\n    reloadPage = () => {\n        // The last \"domLoading\" Time //\n        var currentDocumentTimestamp =\n            new Date(performance.timing.domLoading).getTime();\n        // Current Time //\n        var now = Date.now();\n        // Ten Seconds //\n        var tenSec = 10 * 1000;\n        // Plus Ten Seconds //\n        var plusTenSec = currentDocumentTimestamp + tenSec;\n        if (now > plusTenSec) {\n            window.location.reload();\n        } else { }\n    }\n\n\n    handleUpdate = async (id, name, size, category, brand, description, gender, newprice, index, rate, price, countInStock, img) => {\n        debugger;\n        try {\n            console.log(\"handleUpdate\");\n            console.log(\"updated:\", this.state.updated_prices[index])\n            if (this.state.updated_prices[index] !== newprice) {\n                const np = this.state.updated_prices[index];\n                const response = await tracker.put(\"product/sm/\" + id, {\n                    \n                    newprice:np,\n\n                })\n\n                console.log(response);\n               \n            }\n            this.reloadPage();\n        } catch (e) {\n            console.log(e);\n        }\n\n    }\n  \n\n    render() {\n        return (\n\n            <>\n\n                {this.reloadPage()}\n                {this.state.change ? this.state.arr : null}\n            </>\n        );\n    }\n\n}\nexport default sm_campaigns;"]},"metadata":{},"sourceType":"module"}