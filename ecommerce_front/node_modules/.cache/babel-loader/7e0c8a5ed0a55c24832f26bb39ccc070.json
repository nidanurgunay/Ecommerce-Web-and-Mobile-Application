{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/nidanurgunay/Desktop/cs308/e-commerce-frontend/src/auth.js\";\nimport React, { Component } from 'react';\nimport './SelectOpt';\nimport './Checkbox';\nimport { Button, Container, Form, Input, Modal, Row } from 'reactstrap';\nimport tracker from '../src/api/tracker';\n\nclass auth extends Component {\n  constructor() {\n    super();\n\n    this.handleSubmit = async () => {\n      const passcode = localStorage.getItem('passcode');\n\n      if (passcode === this.state.passcode) {\n        try {\n          const response = await tracker.post('/activateEmail', {\n            token: localStorage.getItem('token'),\n            passcode: this.state.passcode\n          });\n          console.log(response);\n\n          if (response.data.status === \"error\" && response.data.error === \"Incorrect or expired link\") {\n            this.setState({\n              invalid: true,\n              isexist: false\n            });\n          }\n\n          if (response.data.message === \"verified\" && response.status === 200 && response.statusText === \"OK\") {\n            this.setState({\n              token: response.data.token\n            });\n            localStorage.setItem('token', response.data.token);\n            localStorage.setItem('email', response.data.email);\n            localStorage.setItem('userId', response.data.id);\n            localStorage.setItem('isProductManager', response.data.isProductManager);\n            localStorage.setItem('isSalesManager', response.data.isSalesManager);\n            this.props.history.push(\"/Homepage\");\n          }\n        } catch (e) {\n          console.log(e.message);\n        }\n      } else {\n        this.setState({\n          invalid: true\n        });\n      }\n    };\n\n    this.state = {\n      token: \"\",\n      invalid: false,\n      passcode: \"\"\n    };\n    this.handlePasscode = this.handlePasscode.bind(this);\n  }\n\n  handlePasscode(e) {\n    this.setState({\n      passcode: e.target.value\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form\",\n        style: {\n          height: \"50vh\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Container, {\n          className: \"form-container\",\n          style: {\n            width: \"70vh\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            className: \"form\",\n            children: /*#__PURE__*/_jsxDEV(Form, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"row\",\n                className: \"mb-2 pageheading\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"login-check\",\n                  children: \" Please enter the 6 Digit Number that has been sent into your email! \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 64,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 63,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                className: \"mb-2\",\n                type: \"text\",\n                onChange: this.handlePasscode,\n                placeholder: \"Enter 6 Digit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 29\n              }, this), this.state.invalid ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                style: {\n                  color: \"#c29fdc\",\n                  justifyContent: \"space-evenly\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Invalid or expired passcode! Please check your email or register again.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 67,\n                  columnNumber: 133\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 51\n              }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                style: {\n                  justifyContent: \"center\"\n                },\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  style: {\n                    width: \"auto\"\n                  },\n                  className: \"b-login\",\n                  onClick: this.handleSubmit,\n                  color: \"secondary\",\n                  block: true,\n                  children: [\"Create Account \", this.state.invalid]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 70,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\nexport default auth;","map":{"version":3,"sources":["/Users/nidanurgunay/Desktop/cs308/e-commerce-frontend/src/auth.js"],"names":["React","Component","Button","Container","Form","Input","Modal","Row","tracker","auth","constructor","handleSubmit","passcode","localStorage","getItem","state","response","post","token","console","log","data","status","error","setState","invalid","isexist","message","statusText","setItem","email","id","isProductManager","isSalesManager","props","history","push","e","handlePasscode","bind","target","value","render","height","width","color","justifyContent"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport './SelectOpt';\nimport './Checkbox';\nimport { Button, Container, Form, Input, Modal, Row } from 'reactstrap';\n\nimport tracker from '../src/api/tracker'\n\nclass auth extends Component {\n    constructor() {\n        super();\n        this.state = {\n            token: \"\",\n            invalid: false,\n            passcode:\"\",\n        }\n\n        this.handlePasscode = this.handlePasscode.bind(this);\n    }\n    handlePasscode(e) {\n        this.setState({ passcode: e.target.value });\n    }\n\n    handleSubmit = async () => {\n\n            const passcode=localStorage.getItem('passcode');\n            if (passcode === this.state.passcode){\n                try {\n            const response = await tracker.post('/activateEmail', {\n                token: localStorage.getItem('token'),\n                passcode:this.state.passcode\n            });\n            console.log(response)\n            if (response.data.status === \"error\" && response.data.error === \"Incorrect or expired link\") {\n                this.setState({ invalid: true, isexist:false })\n            }\n           \n            if (response.data.message === \"verified\" && response.status === 200 && response.statusText === \"OK\") {\n                this.setState({ token: response.data.token });\n                localStorage.setItem('token', response.data.token);\n                localStorage.setItem('email', response.data.email);\n                localStorage.setItem('userId',response.data.id);\n                localStorage.setItem('isProductManager', response.data.isProductManager);\n                localStorage.setItem('isSalesManager', response.data.isSalesManager);\n                this.props.history.push(\"/Homepage\");\n            }\n        }catch (e) {\n            console.log(e.message);\n        } \n        }else{\n            this.setState({ invalid: true})\n        }\n    }\n   \n    render() {\n        return (\n            <>\n            < div className=\"form\" style={{ height: \"50vh\" }} >\n\n                < Container className=\"form-container\" style={{ width: \"70vh\" }} >\n                    < Row className=\"form\" >\n                        < Form>\n                            < div class=\"row\" className=\"mb-2 pageheading\" >\n                                < div className=\"login-check\" > Please enter the 6 Digit Number that has been sent into your email! </div >\n                            </div >\n                            < Input className=\"mb-2\" type=\"text\" onChange={this.handlePasscode} placeholder=\"Enter 6 Digit\" />\n                            {this.state.invalid ? <div className=\"row\" style={{ color: \"#c29fdc\", justifyContent: \"space-evenly\" }}><p>Invalid or expired passcode! Please check your email or register again.</p></div> : null}\n\n                            <div className=\"row\" style={{ justifyContent: \"center\" }}>\n                                < Button style={{ width: \"auto\" }} className=\"b-login\"\n                                    onClick={this.handleSubmit} color=\"secondary\" block >Create Account {this.state.invalid}</Button >\n                            </div>\n                        </ Form>\n                    </ Row>\n\n                </Container>\n            </ div>\n            </>\n        );\n\n    }\n\n}\n\nexport default auth;"]},"metadata":{},"sourceType":"module"}